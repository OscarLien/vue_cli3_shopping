{"version":3,"sources":["webpack:///./src/views/frontend/Checkout.vue?b817","webpack:///src/views/frontend/Checkout.vue","webpack:///./src/views/frontend/Checkout.vue?1b76","webpack:///./src/views/frontend/Checkout.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","scopedSlots","_u","key","fn","ref","handleSubmit","attrs","isLoading","on","$event","cart","total","staticClass","staticStyle","_v","_e","_l","item","id","delCart","_s","product","title","qty","unit","_f","final_total","directives","name","rawName","value","expression","domProps","target","composing","coupon_code","applyCoupon","preventDefault","createOrder","errors","classes","form","user","class","$set","staticRenderFns","data","email","tel","address","message","methods","code","vm","$http","post","api","response","success","$store","dispatch","getCart","$router","push","computed","created","component"],"mappings":"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","file":"js/chunk-2d210800.07474f8d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ValidationObserver',{scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar handleSubmit = ref.handleSubmit;\nreturn [_c('loading',{attrs:{\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_c('div',[(_vm.cart.total == 0)?_c('div',{staticClass:\"d-flex justify-content-center align-items-center text-center\",staticStyle:{\"height\":\"350px\"}},[_c('div',[_c('h3',[_vm._v(\"您的購物車內還沒有任何商品\")]),_c('router-link',{attrs:{\"to\":\"/product\"}},[_c('button',{staticClass:\"btn btn-outline-primary my-3\"},[_c('i',{staticClass:\"fas fa-shopping-cart pr-2\"}),_vm._v(\"馬上去選購 \")])])],1)]):_vm._e(),(_vm.cart.total !== 0)?_c('div',{staticClass:\"container pt-5\"},[_c('div',{staticClass:\"row justify-content-center\"},[_c('div',{staticClass:\"col-12 col-md-10\"},[_c('ul',{staticClass:\"list-unstyled form-row justify-content-around\"},[_c('li',{staticClass:\"col-12 col-md-4 mb-3\"},[_c('span',{staticClass:\"checkStep active d-block text-center\"},[_vm._v(\"1. 填寫訂購資料\")])]),_c('li',{staticClass:\"col-12 col-md-4 mb-3\"},[_c('span',{staticClass:\"checkStep d-block text-center\"},[_vm._v(\"2. 付款\")])]),_c('li',{staticClass:\"col-12 col-md-4 mb-3\"},[_c('span',{staticClass:\"checkStep d-block text-center\"},[_vm._v(\"3. 完成\")])])])])])]):_vm._e(),(_vm.cart.total !== 0)?_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"my-5 row justify-content-center\"},[_c('div',{staticClass:\"col-12 col-md-10\"},[_c('h2',{staticClass:\"text-center mb-3\"},[_vm._v(\"訂購資訊\")]),_c('table',{staticClass:\"table\"},[_c('thead',[_c('th'),_c('th',[_vm._v(\"品名\")]),_c('th',[_vm._v(\"數量\")]),_c('th',[_vm._v(\"單價\")])]),_c('tbody',_vm._l((_vm.cart.carts),function(item){return _c('tr',{key:item.id},[_c('td',{staticClass:\"align-middle\"},[_c('button',{staticClass:\"btn btn-outline-danger btn-sm\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.delCart(item.id)}}},[_c('i',{staticClass:\"far fa-trash-alt\"})])]),_c('td',{staticClass:\"align-middle\"},[_vm._v(\" \"+_vm._s(item.product.title)+\" \"),(item.coupon)?_c('div',{staticClass:\"text-success\"},[_vm._v(\" 已套用優惠券 \")]):_vm._e()]),_c('td',{staticClass:\"align-middle\"},[_vm._v(\" \"+_vm._s(item.qty)+\"/\"+_vm._s(item.product.unit)+\" \")]),_c('td',{staticClass:\"align-middle text-right\"},[_vm._v(\" \"+_vm._s(_vm._f(\"currency\")(item.final_total))+\" \")])])}),0),_c('tfoot',[_c('tr',[_c('td',{staticClass:\"text-right\",attrs:{\"colspan\":\"3\"}},[_vm._v(\"總計\")]),_c('td',{staticClass:\"text-right\"},[_vm._v(_vm._s(_vm._f(\"currency\")(_vm.cart.total)))])]),(_vm.cart.final_total != _vm.cart.total)?_c('tr',[_c('td',{staticClass:\"text-right text-success\",attrs:{\"colspan\":\"3\"}},[_vm._v(\"折扣價\")]),_c('td',{staticClass:\"text-right text-success\"},[_vm._v(\" \"+_vm._s(_vm._f(\"currency\")(_vm.cart.final_total))+\" \")])]):_vm._e()])]),_c('div',{staticClass:\"input-group mb-3 input-group-sm\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.coupon_code),expression:\"coupon_code\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"請輸入優惠碼\"},domProps:{\"value\":(_vm.coupon_code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.coupon_code=$event.target.value}}}),_c('div',{staticClass:\"input-group-append\"},[_c('button',{staticClass:\"btn btn-outline-secondary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.applyCoupon}},[_vm._v(\" 套用優惠碼 \")])])])]),_c('div',{staticClass:\"col-12 col-md-10 mb-5\"},[_c('h2',{staticClass:\"text-center\"},[_vm._v(\"填寫訂購資料\")]),_c('div',{staticClass:\"form-row\"},[_c('form',{staticClass:\"col-12\",on:{\"submit\":function($event){$event.preventDefault();return handleSubmit(_vm.createOrder)}}},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"email\"}},[_vm._v(\"Email\")]),_c('ValidationProvider',{attrs:{\"name\":\"email\",\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.email),expression:\"form.user.email\"}],staticClass:\"form-control\",class:classes,attrs:{\"type\":\"email\",\"id\":\"email\",\"name\":\"email\",\"placeholder\":\"請輸入Email\"},domProps:{\"value\":(_vm.form.user.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"email\", $event.target.value)}}}),_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(errors[0]))])]}}],null,true)})],1),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"name\"}},[_vm._v(\"姓名\")]),_c('ValidationProvider',{attrs:{\"name\":\"name\",\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.name),expression:\"form.user.name\"}],staticClass:\"form-control\",class:classes,attrs:{\"type\":\"text\",\"id\":\"name\",\"name\":\"name\",\"placeholder\":\"請輸入姓名\"},domProps:{\"value\":(_vm.form.user.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"name\", $event.target.value)}}}),_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(errors[0]))])]}}],null,true)})],1),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"tel\"}},[_vm._v(\"電話\")]),_c('ValidationProvider',{attrs:{\"name\":\"tel\",\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.tel),expression:\"form.user.tel\"}],staticClass:\"form-control\",class:classes,attrs:{\"type\":\"text\",\"id\":\"tel\",\"name\":\"tel\",\"placeholder\":\"請輸入電話\"},domProps:{\"value\":(_vm.form.user.tel)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"tel\", $event.target.value)}}}),_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(errors[0]))])]}}],null,true)})],1),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"address\"}},[_vm._v(\"地址\")]),_c('ValidationProvider',{attrs:{\"name\":\"address\",\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.address),expression:\"form.user.address\"}],staticClass:\"form-control\",class:classes,attrs:{\"type\":\"text\",\"id\":\"address\",\"name\":\"address\",\"placeholder\":\"請輸入地址\"},domProps:{\"value\":(_vm.form.user.address)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"address\", $event.target.value)}}}),_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(errors[0]))])]}}],null,true)})],1),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"message\"}},[_vm._v(\"留言\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.message),expression:\"form.message\"}],staticClass:\"form-control\",attrs:{\"name\":\"message\",\"id\":\"message\",\"rows\":\"3\",\"placeholder\":\"有什麼話想告訴我們？\"},domProps:{\"value\":(_vm.form.message)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"message\", $event.target.value)}}})]),_c('div',{staticClass:\"text-right\"},[_c('button',{staticClass:\"btn btn-outline-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\" 建立訂單 \")])])])])])])]):_vm._e()])]}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <ValidationObserver v-slot=\"{ handleSubmit }\">\n    <loading :active.sync=\"isLoading\"></loading>\n    <div>\n      <div\n        class=\"d-flex justify-content-center align-items-center text-center\"\n        style=\"height: 350px\"\n        v-if=\"cart.total == 0\"\n      >\n        <div>\n          <h3>您的購物車內還沒有任何商品</h3>\n          <router-link to=\"/product\"\n            ><button class=\"btn btn-outline-primary my-3\">\n              <i class=\"fas fa-shopping-cart pr-2\"></i>馬上去選購\n            </button></router-link\n          >\n        </div>\n      </div>\n      <div class=\"container pt-5\" v-if=\"cart.total !== 0\">\n        <div class=\"row justify-content-center\">\n          <div class=\"col-12 col-md-10\">\n            <ul class=\"list-unstyled form-row justify-content-around\">\n              <li class=\"col-12 col-md-4 mb-3\">\n                <span class=\"checkStep active d-block text-center\"\n                  >1. 填寫訂購資料</span\n                >\n              </li>\n              <li class=\"col-12 col-md-4 mb-3\">\n                <span class=\"checkStep d-block text-center\">2. 付款</span>\n              </li>\n              <li class=\"col-12 col-md-4 mb-3\">\n                <span class=\"checkStep d-block text-center\">3. 完成</span>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"container\" v-if=\"cart.total !== 0\">\n        <div class=\"my-5 row justify-content-center\">\n          <div class=\"col-12 col-md-10\">\n            <h2 class=\"text-center mb-3\">訂購資訊</h2>\n            <table class=\"table\">\n              <thead>\n                <th></th>\n                <th>品名</th>\n                <th>數量</th>\n                <th>單價</th>\n              </thead>\n              <tbody>\n                <tr v-for=\"item in cart.carts\" :key=\"item.id\">\n                  <td class=\"align-middle\">\n                    <button\n                      type=\"button\"\n                      class=\"btn btn-outline-danger btn-sm\"\n                      @click=\"delCart(item.id)\"\n                    >\n                      <i class=\"far fa-trash-alt\"></i>\n                    </button>\n                  </td>\n                  <td class=\"align-middle\">\n                    {{ item.product.title }}\n                    <div class=\"text-success\" v-if=\"item.coupon\">\n                      已套用優惠券\n                    </div>\n                  </td>\n                  <td class=\"align-middle\">\n                    {{ item.qty }}/{{ item.product.unit }}\n                  </td>\n                  <td class=\"align-middle text-right\">\n                    {{ item.final_total | currency }}\n                  </td>\n                </tr>\n              </tbody>\n              <tfoot>\n                <tr>\n                  <td colspan=\"3\" class=\"text-right\">總計</td>\n                  <td class=\"text-right\">{{ cart.total | currency }}</td>\n                </tr>\n                <tr v-if=\"cart.final_total != cart.total\">\n                  <td colspan=\"3\" class=\"text-right text-success\">折扣價</td>\n                  <td class=\"text-right text-success\">\n                    {{ cart.final_total | currency }}\n                  </td>\n                </tr>\n              </tfoot>\n            </table>\n            <div class=\"input-group mb-3 input-group-sm\">\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                placeholder=\"請輸入優惠碼\"\n                v-model=\"coupon_code\"\n              />\n              <div class=\"input-group-append\">\n                <button\n                  class=\"btn btn-outline-secondary\"\n                  type=\"button\"\n                  @click=\"applyCoupon\"\n                >\n                  套用優惠碼\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"col-12 col-md-10 mb-5\">\n            <h2 class=\"text-center\">填寫訂購資料</h2>\n            <div class=\"form-row\">\n              <form class=\"col-12\" @submit.prevent=\"handleSubmit(createOrder)\">\n                <div class=\"form-group\">\n                  <label for=\"email\">Email</label>\n                  <ValidationProvider\n                    name=\"email\"\n                    rules=\"required\"\n                    v-slot=\"{ errors, classes }\"\n                  >\n                    <input\n                      type=\"email\"\n                      class=\"form-control\"\n                      id=\"email\"\n                      name=\"email\"\n                      placeholder=\"請輸入Email\"\n                      v-model=\"form.user.email\"\n                      :class=\"classes\"\n                    />\n                    <span class=\"text-danger\">{{ errors[0] }}</span>\n                  </ValidationProvider>\n                </div>\n\n                <div class=\"form-group\">\n                  <label for=\"name\">姓名</label>\n                  <ValidationProvider\n                    name=\"name\"\n                    rules=\"required\"\n                    v-slot=\"{ errors, classes }\"\n                  >\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"name\"\n                      name=\"name\"\n                      placeholder=\"請輸入姓名\"\n                      v-model=\"form.user.name\"\n                      :class=\"classes\"\n                    />\n                    <span class=\"text-danger\">{{ errors[0] }}</span>\n                  </ValidationProvider>\n                </div>\n\n                <div class=\"form-group\">\n                  <label for=\"tel\">電話</label>\n                  <ValidationProvider\n                    name=\"tel\"\n                    rules=\"required\"\n                    v-slot=\"{ errors, classes }\"\n                  >\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"tel\"\n                      name=\"tel\"\n                      placeholder=\"請輸入電話\"\n                      v-model=\"form.user.tel\"\n                      :class=\"classes\"\n                    /><span class=\"text-danger\">{{ errors[0] }}</span>\n                  </ValidationProvider>\n                </div>\n\n                <div class=\"form-group\">\n                  <label for=\"address\">地址</label>\n                  <ValidationProvider\n                    name=\"address\"\n                    rules=\"required\"\n                    v-slot=\"{ errors, classes }\"\n                  >\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"address\"\n                      name=\"address\"\n                      placeholder=\"請輸入地址\"\n                      v-model=\"form.user.address\"\n                      :class=\"classes\"\n                    /><span class=\"text-danger\">{{ errors[0] }}</span>\n                  </ValidationProvider>\n                </div>\n\n                <div class=\"form-group\">\n                  <label for=\"message\">留言</label>\n                  <textarea\n                    class=\"form-control\"\n                    name=\"message\"\n                    id=\"message\"\n                    rows=\"3\"\n                    placeholder=\"有什麼話想告訴我們？\"\n                    v-model=\"form.message\"\n                  ></textarea>\n                </div>\n                <div class=\"text-right\">\n                  <button type=\"submit\" class=\"btn btn-outline-primary\">\n                    建立訂單\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </ValidationObserver>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex';\n\nexport default {\n  data() {\n    return {\n      coupon_code: '',\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n      isLoading: false,\n    };\n  },\n  methods: {\n    applyCoupon() {\n      const vm = this;\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/coupon`;\n      const coupon = {\n        code: vm.coupon_code,\n      };\n      this.$http.post(api, { data: coupon }).then((response) => {\n        if (response.data.success) {\n          vm.$store.dispatch('cartModules/updateMessage', { message: response.data.message, status: 'success' });\n          vm.getCart();\n        } else {\n          vm.$store.dispatch('cartModules/updateMessage', { message: response.data.message, status: 'danger' });\n        }\n      });\n    },\n    createOrder() {\n      const vm = this;\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/order`;\n      const order = vm.form;\n      vm.isLoading = true;\n      this.$http.post(api, { data: order }).then((response) => {\n        if (response.data.success) {\n          vm.$store.dispatch('cartModules/updateMessage', { message: response.data.message, status: 'success' });\n          vm.$router.push(`/payment/${response.data.orderId}`);\n          vm.$store.dispatch('cartModules/getCart');\n          vm.isLoading = false;\n        }\n      });\n    },\n    ...mapActions('cartModules', ['getCart', 'delCart']),\n  },\n  computed: {\n    ...mapGetters('cartModules', ['cart']),\n  },\n  created() {\n    this.getCart();\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Checkout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Checkout.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Checkout.vue?vue&type=template&id=5926dd60&\"\nimport script from \"./Checkout.vue?vue&type=script&lang=js&\"\nexport * from \"./Checkout.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}