{"version":3,"sources":["webpack:///./src/views/frontend/Checkout.vue?41d8","webpack:///src/views/frontend/Checkout.vue","webpack:///./src/views/frontend/Checkout.vue?1b76","webpack:///./src/views/frontend/Checkout.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","scopedSlots","_u","key","fn","ref","handleSubmit","attrs","isLoading","on","$event","cart","total","staticClass","staticStyle","_v","_e","_l","item","id","delCart","_s","product","title","directives","name","rawName","value","expression","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","$set","multiple","changeQty","qty","num","domProps","unit","_f","final_total","composing","coupon_code","applyCoupon","preventDefault","createOrder","errors","classes","form","user","class","staticRenderFns","data","email","tel","address","message","methods","code","vm","$http","post","api","response","success","$store","dispatch","getCart","$router","push","product_id","productId","all","delete","delapi","addapi","computed","created","component"],"mappings":"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","file":"js/chunk-2d210800.5c79c5ee.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ValidationObserver',{scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar handleSubmit = ref.handleSubmit;\nreturn [_c('loading',{attrs:{\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_c('div',[(_vm.cart.total == 0)?_c('div',{staticClass:\"d-flex justify-content-center align-items-center text-center\",staticStyle:{\"height\":\"350px\"}},[_c('div',[_c('h3',[_vm._v(\"您的購物車內還沒有任何商品\")]),_c('router-link',{attrs:{\"to\":\"/product\"}},[_c('button',{staticClass:\"btn btn-outline-primary my-3\"},[_c('i',{staticClass:\"fas fa-shopping-cart pr-2\"}),_vm._v(\"馬上去選購 \")])])],1)]):_vm._e(),(_vm.cart.total !== 0)?_c('div',{staticClass:\"container pt-5\"},[_c('div',{staticClass:\"row justify-content-center\"},[_c('div',{staticClass:\"col-12 col-md-8 px-0\"},[_c('ul',{staticClass:\"list-unstyled d-flex justify-content-around\"},[_c('li',{staticClass:\"checkStep checkStepActive\"},[_c('span',{staticClass:\" text-center\"},[_vm._v(\" 1. 填寫訂購資料\")])]),_c('li',{staticClass:\"checkStep\"},[_c('span',{staticClass:\"text-center\"},[_vm._v(\"2. 確認付款\")])]),_c('li',{staticClass:\"checkStep\"},[_c('span',{staticClass:\"text-center\"},[_vm._v(\"3. 完成\")])])])])])]):_vm._e(),(_vm.cart.total !== 0)?_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"my-5 row justify-content-center\"},[_c('div',{staticClass:\"col-12 col-md-8\"},[_c('h2',{staticClass:\"text-center mb-3\"},[_vm._v(\"訂購資訊\")]),_c('table',{staticClass:\"table\"},[_c('thead',[_c('th'),_c('th',[_vm._v(\"品名\")]),_c('th',[_vm._v(\"數量\")]),_c('th',[_vm._v(\"單價\")])]),_c('tbody',_vm._l((_vm.cart.carts),function(item){return _c('tr',{key:item.id},[_c('td',{staticClass:\"align-middle\"},[_c('button',{staticClass:\"btn btn-outline-danger btn-sm\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.delCart(item.id)}}},[_c('i',{staticClass:\"far fa-trash-alt\"})])]),_c('td',{staticClass:\"align-middle\"},[_vm._v(\" \"+_vm._s(item.product.title)+\" \"),(item.coupon)?_c('div',{staticClass:\"text-success\"},[_vm._v(\" 已套用優惠券 \")]):_vm._e()]),_c('td',{staticClass:\"align-middle\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(item.qty),expression:\"item.qty\"}],attrs:{\"name\":\"\",\"id\":\"\"},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(item, \"qty\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])},function($event){return _vm.changeQty(item.id, item.product.id, item.qty)}]}},_vm._l((10),function(num){return _c('option',{key:num,domProps:{\"value\":num}},[_vm._v(_vm._s(num))])}),0),_vm._v(\" \"+_vm._s(item.product.unit)+\" \")]),_c('td',{staticClass:\"align-middle text-right\"},[_vm._v(\" \"+_vm._s(_vm._f(\"currency\")(item.final_total))+\" \")])])}),0),_c('tfoot',[_c('tr',[_c('td',{staticClass:\"text-right\",attrs:{\"colspan\":\"3\"}},[_vm._v(\"總計\")]),_c('td',{staticClass:\"text-right\"},[_vm._v(_vm._s(_vm._f(\"currency\")(_vm.cart.total)))])]),(_vm.cart.final_total != _vm.cart.total)?_c('tr',[_c('td',{staticClass:\"text-right text-success\",attrs:{\"colspan\":\"3\"}},[_vm._v(\"折扣價\")]),_c('td',{staticClass:\"text-right text-success\"},[_vm._v(\" \"+_vm._s(_vm._f(\"currency\")(_vm.cart.final_total))+\" \")])]):_vm._e()])]),_c('div',{staticClass:\"input-group mb-3 input-group-sm\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.coupon_code),expression:\"coupon_code\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"請輸入優惠碼\"},domProps:{\"value\":(_vm.coupon_code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.coupon_code=$event.target.value}}}),_c('div',{staticClass:\"input-group-append\"},[_c('button',{staticClass:\"btn btn-outline-secondary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.applyCoupon}},[_vm._v(\" 套用優惠碼 \")])])])]),_c('div',{staticClass:\"col-12 col-md-8 mb-5\"},[_c('h2',{staticClass:\"text-center\"},[_vm._v(\"填寫訂購資料\")]),_c('div',{staticClass:\"form-row\"},[_c('form',{staticClass:\"col-12\",on:{\"submit\":function($event){$event.preventDefault();return handleSubmit(_vm.createOrder)}}},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"email\"}},[_vm._v(\"電子郵件\"),_c('span',{staticClass:\"text-danger\"},[_vm._v(\"*必填\")])]),_c('ValidationProvider',{attrs:{\"name\":\"email\",\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.email),expression:\"form.user.email\"}],staticClass:\"form-control\",class:classes,attrs:{\"type\":\"email\",\"id\":\"email\",\"name\":\"email\",\"placeholder\":\"請輸入Email\"},domProps:{\"value\":(_vm.form.user.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"email\", $event.target.value)}}}),_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(errors[0]))])]}}],null,true)})],1),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"name\"}},[_vm._v(\"姓名\"),_c('span',{staticClass:\"text-danger\"},[_vm._v(\"*必填\")])]),_c('ValidationProvider',{attrs:{\"name\":\"name\",\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.name),expression:\"form.user.name\"}],staticClass:\"form-control\",class:classes,attrs:{\"type\":\"text\",\"id\":\"name\",\"name\":\"name\",\"placeholder\":\"請輸入姓名\"},domProps:{\"value\":(_vm.form.user.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"name\", $event.target.value)}}}),_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(errors[0]))])]}}],null,true)})],1),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"tel\"}},[_vm._v(\"電話\"),_c('span',{staticClass:\"text-danger\"},[_vm._v(\"*必填\")])]),_c('ValidationProvider',{attrs:{\"name\":\"tel\",\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.tel),expression:\"form.user.tel\"}],staticClass:\"form-control\",class:classes,attrs:{\"type\":\"text\",\"id\":\"tel\",\"name\":\"tel\",\"placeholder\":\"請輸入電話\"},domProps:{\"value\":(_vm.form.user.tel)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"tel\", $event.target.value)}}}),_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(errors[0]))])]}}],null,true)})],1),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"address\"}},[_vm._v(\"地址\"),_c('span',{staticClass:\"text-danger\"},[_vm._v(\"*必填\")])]),_c('ValidationProvider',{attrs:{\"name\":\"address\",\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.address),expression:\"form.user.address\"}],staticClass:\"form-control\",class:classes,attrs:{\"type\":\"text\",\"id\":\"address\",\"name\":\"address\",\"placeholder\":\"請輸入地址\"},domProps:{\"value\":(_vm.form.user.address)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"address\", $event.target.value)}}}),_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(errors[0]))])]}}],null,true)})],1),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"message\"}},[_vm._v(\"留言\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.message),expression:\"form.message\"}],staticClass:\"form-control\",attrs:{\"name\":\"message\",\"id\":\"message\",\"rows\":\"3\",\"placeholder\":\"有什麼話想告訴我們？\"},domProps:{\"value\":(_vm.form.message)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"message\", $event.target.value)}}})]),_c('div',{staticClass:\"text-right\"},[_c('button',{staticClass:\"btn btn-outline-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\" 建立訂單 \")])])])])])])]):_vm._e()])]}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <ValidationObserver v-slot=\"{ handleSubmit }\">\n    <loading :active.sync=\"isLoading\"></loading>\n    <div>\n      <div\n        class=\"d-flex justify-content-center align-items-center text-center\"\n        style=\"height: 350px\"\n        v-if=\"cart.total == 0\"\n      >\n        <div>\n          <h3>您的購物車內還沒有任何商品</h3>\n          <router-link to=\"/product\"\n            ><button class=\"btn btn-outline-primary my-3\">\n              <i class=\"fas fa-shopping-cart pr-2\"></i>馬上去選購\n            </button></router-link\n          >\n        </div>\n      </div>\n      <div class=\"container pt-5\" v-if=\"cart.total !== 0\">\n        <div class=\"row justify-content-center\">\n          <div class=\"col-12 col-md-8 px-0\">\n            <ul class=\"list-unstyled d-flex justify-content-around\">\n              <li class=\"checkStep checkStepActive\">\n                <span class=\" text-center\">\n                  1. 填寫訂購資料</span>\n              </li>\n              <li class=\"checkStep\">\n                <span class=\"text-center\">2. 確認付款</span>\n              </li>\n              <li class=\"checkStep\">\n                <span class=\"text-center\">3. 完成</span>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"container\" v-if=\"cart.total !== 0\">\n        <div class=\"my-5 row justify-content-center\">\n          <div class=\"col-12 col-md-8\">\n            <h2 class=\"text-center mb-3\">訂購資訊</h2>\n            <table class=\"table\">\n              <thead>\n                <th></th>\n                <th>品名</th>\n                <th>數量</th>\n                <th>單價</th>\n              </thead>\n              <tbody>\n                <tr v-for=\"item in cart.carts\" :key=\"item.id\">\n                  <td class=\"align-middle\">\n                    <button\n                      type=\"button\"\n                      class=\"btn btn-outline-danger btn-sm\"\n                      @click=\"delCart(item.id)\"\n                    >\n                      <i class=\"far fa-trash-alt\"></i>\n                    </button>\n                  </td>\n                  <td class=\"align-middle\">\n                    {{ item.product.title }}\n                    <div class=\"text-success\" v-if=\"item.coupon\">\n                      已套用優惠券\n                    </div>\n                  </td>\n                  <td class=\"align-middle\">\n                    <select name=\"\" id=\"\" v-model=\"item.qty\"\n                    @change=\"changeQty(item.id, item.product.id, item.qty)\" >\n                      <option :value=\"num\" v-for=\"num in 10\" :key=\"num\">{{num}}</option>\n                    </select>\n                    {{ item.product.unit }}\n                    <!-- {{ item.qty }}/{{ item.product.unit }} -->\n                  </td>\n                  <td class=\"align-middle text-right\">\n                    {{ item.final_total | currency }}\n                  </td>\n                </tr>\n              </tbody>\n              <tfoot>\n                <tr>\n                  <td colspan=\"3\" class=\"text-right\">總計</td>\n                  <td class=\"text-right\">{{ cart.total | currency }}</td>\n                </tr>\n                <tr v-if=\"cart.final_total != cart.total\">\n                  <td colspan=\"3\" class=\"text-right text-success\">折扣價</td>\n                  <td class=\"text-right text-success\">\n                    {{ cart.final_total | currency }}\n                  </td>\n                </tr>\n              </tfoot>\n            </table>\n            <div class=\"input-group mb-3 input-group-sm\">\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                placeholder=\"請輸入優惠碼\"\n                v-model=\"coupon_code\"\n              />\n              <div class=\"input-group-append\">\n                <button\n                  class=\"btn btn-outline-secondary\"\n                  type=\"button\"\n                  @click=\"applyCoupon\"\n                >\n                  套用優惠碼\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"col-12 col-md-8 mb-5\">\n            <h2 class=\"text-center\">填寫訂購資料</h2>\n            <div class=\"form-row\">\n              <form class=\"col-12\" @submit.prevent=\"handleSubmit(createOrder)\">\n                <div class=\"form-group\">\n                  <label for=\"email\">電子郵件<span class=\"text-danger\">*必填</span></label>\n                  <ValidationProvider\n                    name=\"email\"\n                    rules=\"required\"\n                    v-slot=\"{ errors, classes }\"\n                  >\n                    <input\n                      type=\"email\"\n                      class=\"form-control\"\n                      id=\"email\"\n                      name=\"email\"\n                      placeholder=\"請輸入Email\"\n                      v-model=\"form.user.email\"\n                      :class=\"classes\"\n                    />\n                    <span class=\"text-danger\">{{ errors[0] }}</span>\n                  </ValidationProvider>\n                </div>\n\n                <div class=\"form-group\">\n                  <label for=\"name\">姓名<span class=\"text-danger\">*必填</span></label>\n                  <ValidationProvider\n                    name=\"name\"\n                    rules=\"required\"\n                    v-slot=\"{ errors, classes }\"\n                  >\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"name\"\n                      name=\"name\"\n                      placeholder=\"請輸入姓名\"\n                      v-model=\"form.user.name\"\n                      :class=\"classes\"\n                    />\n                    <span class=\"text-danger\">{{ errors[0] }}</span>\n                  </ValidationProvider>\n                </div>\n\n                <div class=\"form-group\">\n                  <label for=\"tel\">電話<span class=\"text-danger\">*必填</span></label>\n                  <ValidationProvider\n                    name=\"tel\"\n                    rules=\"required\"\n                    v-slot=\"{ errors, classes }\"\n                  >\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"tel\"\n                      name=\"tel\"\n                      placeholder=\"請輸入電話\"\n                      v-model=\"form.user.tel\"\n                      :class=\"classes\"\n                    /><span class=\"text-danger\">{{ errors[0] }}</span>\n                  </ValidationProvider>\n                </div>\n\n                <div class=\"form-group\">\n                  <label for=\"address\">地址<span class=\"text-danger\">*必填</span></label>\n                  <ValidationProvider\n                    name=\"address\"\n                    rules=\"required\"\n                    v-slot=\"{ errors, classes }\"\n                  >\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"address\"\n                      name=\"address\"\n                      placeholder=\"請輸入地址\"\n                      v-model=\"form.user.address\"\n                      :class=\"classes\"\n                    /><span class=\"text-danger\">{{ errors[0] }}</span>\n                  </ValidationProvider>\n                </div>\n\n                <div class=\"form-group\">\n                  <label for=\"message\">留言</label>\n                  <textarea\n                    class=\"form-control\"\n                    name=\"message\"\n                    id=\"message\"\n                    rows=\"3\"\n                    placeholder=\"有什麼話想告訴我們？\"\n                    v-model=\"form.message\"\n                  ></textarea>\n                </div>\n                <div class=\"text-right\">\n                  <button type=\"submit\" class=\"btn btn-outline-primary\">\n                    建立訂單\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </ValidationObserver>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex';\n\nexport default {\n  data() {\n    return {\n      coupon_code: '',\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n      isLoading: false,\n    };\n  },\n  methods: {\n    applyCoupon() {\n      const vm = this;\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/coupon`;\n      const coupon = {\n        code: vm.coupon_code,\n      };\n      vm.$http.post(api, { data: coupon }).then((response) => {\n        if (response.data.success) {\n          vm.$store.dispatch('cartModules/updateMessage', { message: response.data.message, status: 'success' });\n          vm.getCart();\n        } else {\n          vm.$store.dispatch('cartModules/updateMessage', { message: response.data.message, status: 'danger' });\n        }\n      });\n    },\n    createOrder() {\n      const vm = this;\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/order`;\n      const order = vm.form;\n      vm.isLoading = true;\n      vm.$http.post(api, { data: order }).then((response) => {\n        if (response.data.success) {\n          vm.$store.dispatch('cartModules/updateMessage', { message: response.data.message, status: 'success' });\n          vm.$router.push(`/payment/${response.data.orderId}`);\n          vm.$store.dispatch('cartModules/getCart');\n          vm.isLoading = false;\n        }\n      });\n    },\n    changeQty(id, productId, qty) {\n      const vm = this;\n      const addapi = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/cart`;\n      const delapi = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/cart/${id}`;\n      const cart = {\n        product_id: productId,\n        qty,\n      };\n      vm.$http.all([vm.$http.delete(delapi), vm.$http.post(addapi, { data: cart })])\n        .then(vm.$http.spread(() => {\n          vm.getCart();\n        }));\n    },\n    ...mapActions('cartModules', ['getCart', 'delCart']),\n  },\n  computed: {\n    ...mapGetters('cartModules', ['cart']),\n  },\n  created() {\n    this.getCart();\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Checkout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Checkout.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Checkout.vue?vue&type=template&id=fabd139e&\"\nimport script from \"./Checkout.vue?vue&type=script&lang=js&\"\nexport * from \"./Checkout.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}