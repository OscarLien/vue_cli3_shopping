(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20efe4"],{b275:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(s){t.isLoading=s}}}),a("div",{staticClass:"container pt-5"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-12 col-md-8 px-0"},[a("ul",{staticClass:"list-unstyled d-flex justify-content-around"},[t._m(0),a("li",{staticClass:"checkStep",class:{checkStepActive:!1===t.order.is_paid}},[a("span",{staticClass:"text-center"},[t._v("2. 確認付款")])]),a("li",{staticClass:"checkStep",class:{checkStepActive:!0===t.order.is_paid}},[a("span",{staticClass:"text-center"},[t._v("3. 完成")])])])])])]),a("div",{staticClass:"container"},[a("div",{staticClass:"row justify-content-center"},[a("form",{staticClass:"col-12 col-md-8",on:{submit:function(s){return s.preventDefault(),t.payOrder(s)}}},[a("h2",{staticClass:"text-center"},[t._v("確認訂購資料")]),a("table",{staticClass:"table"},[t._m(1),a("tbody",t._l(t.order.products,(function(s){return a("tr",{key:s.id},[a("td",{staticClass:"align-middle"},[t._v(t._s(s.product.title))]),a("td",{staticClass:"align-middle"},[t._v(" "+t._s(s.qty)+t._s(s.product.unit)+" ")]),a("td",{staticClass:"align-middle text-right"},[t._v(" "+t._s(t._f("currency")(s.final_total))+" ")])])})),0),a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("總計:")]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.order.total)))])])])]),a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("th",{attrs:{width:"140"}},[t._v("電子郵件")]),a("td",[t._v(t._s(t.order.user.email))])]),a("tr",[a("th",[t._v("姓名")]),a("td",[t._v(t._s(t.order.user.name))])]),a("tr",[a("th",[t._v("收件人電話")]),a("td",[t._v(t._s(t.order.user.tel))])]),a("tr",[a("th",[t._v("收件人地址")]),a("td",[t._v(t._s(t.order.user.address))])]),a("tr",[a("th",[t._v("付款狀態")]),a("td",[t.order.is_paid?a("span",{staticClass:"text-success"},[t._v("付款完成")]):a("span",[t._v("尚未付款")])])])])]),!1===t.order.is_paid?a("div",{staticClass:"text-right mb-3"},[a("button",{staticClass:"btn btn-outline-primary"},[t._v("確認付款去")])]):t._e()]),t.order.is_paid?a("div",{staticClass:"col-12 col-md-8 mb-3"},[a("button",{staticClass:"btn btn-outline-primary btn-block py-2",on:{click:function(s){return s.preventDefault(),t.$router.push("/product")}}},[t._v(" 繼續買起來 ")])]):t._e()])]),a("div",{staticClass:"modal fade",attrs:{id:"paySuccessModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(2),t._m(3),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:t.goToProduct}},[t._v("前往")])])])])])],1)},i=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",{staticClass:"checkStep "},[a("span",{staticClass:" text-center"},[t._v(" 1. 填寫訂購資料")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("thead",[a("th",[t._v("品名")]),a("th",[t._v("數量")]),a("th",[t._v("單價")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("付款成功")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"modal-body text-center"},[a("span",{staticClass:"text-success"},[t._v("付款成功")]),a("br"),t._v(" 是否繼續前往商品頁面選購？ ")])}],r=(a("99af"),a("1157")),c=a.n(r),o={data:function(){return{orderId:"",order:{user:{}},isLoading:!1}},methods:{getOrder:function(){var t=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("oscar","/order/").concat(t.orderId);t.isLoading=!0,t.$http.get(s).then((function(s){t.order=s.data.order,t.isLoading=!1}))},payOrder:function(){var t=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("oscar","/pay/").concat(t.orderId);t.$http.post(s).then((function(s){s.data.success&&(t.$store.dispatch("cartModules/updateMessage",{message:s.data.message,status:"success"}),t.getOrder(),t.paySuccess())}))},paySuccess:function(){c()("#paySuccessModal").modal("show")},goToProduct:function(){var t=this;c()("#paySuccessModal").modal("hide"),t.$router.push("/product")}},created:function(){this.orderId=this.$route.params.id,this.getOrder()}},n=o,d=a("2877"),l=Object(d["a"])(n,e,i,!1,null,null,null);s["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d20efe4.5f3b916f.js.map